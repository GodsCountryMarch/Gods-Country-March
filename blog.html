<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>Blog • God’s Country March</title>

  <link rel="canonical" href="https://godscountrymarch.com/blog.html" />
  <meta name="description" content="Updates and stories from the God’s Country March." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Background asset -->
  <link rel="preload" as="image" href="BoiseCrossandCapital.jpeg" />

  <style>
    html { scroll-behavior: smooth; }
    section[id] { scroll-margin-top: 96px; }
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #1a202c, #2d3748);
      color: #fff;
    }
    header { padding-top: env(safe-area-inset-top); }
    .nav-words a { text-decoration: none; }
    .nav-words a:hover { text-decoration: underline; }
    .card { background: rgba(0,0,0,.35); }
    @media (prefers-reduced-motion: reduce){ *{animation:none!important;transition:none!important;} }
  </style>

  <!-- Optional: Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
</head>
<body class="text-white">

  <!-- WORD-STRIP NAV -->
  <header class="fixed top-0 inset-x-0 z-50">
    <div class="mx-auto max-w-7xl px-4">
      <div class="mt-3 mb-2 flex justify-center">
        <nav class="nav-words w-full rounded-2xl bg-black/70 backdrop-blur text-white shadow ring-1 ring-white/10
                    px-3 sm:px-4 py-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-1 text-[13px] sm:text-sm">
          <a href="index.html" class="font-semibold hover:text-amber-400">God’s Country March</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="mission.html" class="hover:text-amber-400">Mission &amp; Vision</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="sponsors.html" class="hover:text-amber-400">Sponsors &amp; Supporters</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="gallery.html" class="hover:text-amber-400">Photos</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="blog.html" class="hover:text-amber-400 underline">Blog</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="volunteer.html" class="hover:text-amber-400">Volunteer</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="https://donorbox.org/2025-gods-country-march" target="_blank" rel="noopener" class="hover:text-amber-400">Donate</a>
          <span class="hidden sm:inline opacity-40">•</span>
          <a href="index.html#rsvp" class="hover:text-amber-400">RSVP</a>
        </nav>
      </div>
    </div>
  </header>
  <div class="h-20"></div>

  <!-- HERO -->
  <section class="relative isolate overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-center bg-cover"
         style="background-image:url('BoiseCrossandCapital.jpeg'); background-position:50% 35%;"></div>
    <div class="absolute inset-0 -z-10 bg-black/40"></div>

    <div class="mx-auto max-w-7xl px-4 py-16 text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold drop-shadow">Blog</h1>
      <p class="mt-4 text-lg sm:text-xl max-w-3xl mx-auto text-white/90">
        Updates, stories, and ways to get involved.
      </p>
    </div>
  </section>

  <!-- CONTROLS -->
  <section class="mx-auto max-w-7xl px-4 pb-4">
    <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-2">
        <input id="search" type="search" placeholder="Search posts..."
               class="w-full sm:w-72 rounded-xl bg-black/40 ring-1 ring-white/10 px-3 py-2 text-sm placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-amber-400/50" />
      </div>

      <div class="flex items-center gap-2">
        <div id="tagRow" class="hidden sm:flex flex-wrap items-center gap-2"></div>
        <div class="flex items-center gap-2 text-xs sm:text-sm">
          <span class="opacity-80">Sort:</span>
          <button data-sort="new" class="sort-btn rounded-lg px-3 py-1.5 bg-black/60 ring-1 ring-white/10 hover:bg-black/70">Newest</button>
          <button data-sort="old" class="sort-btn rounded-lg px-3 py-1.5 bg-black/30 ring-1 ring-white/10 hover:bg-black/40">Oldest</button>
        </div>
      </div>
    </div>
  </section>

  <!-- LIST -->
  <section class="mx-auto max-w-7xl px-4 pb-16">
    <div id="list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- JS fills -->
    </div>

    <div id="empty" class="hidden text-center text-white/70 mt-8">
      No posts yet.
    </div>
  </section>

  <!-- MODAL / READER -->
  <div id="reader" class="hidden fixed inset-0 z-50 bg-black/90 items-center justify-center p-4">
    <article class="w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white text-slate-900 shadow ring-1 ring-slate-200">
      <header class="px-5 py-4 border-b border-slate-200">
        <div class="flex items-center justify-between gap-4">
          <h2 id="rdTitle" class="font-extrabold text-xl"></h2>
          <button id="rdClose" class="rounded-lg px-3 py-1.5 bg-slate-100 text-slate-800 ring-1 ring-slate-200 hover:bg-slate-200">Close ✕</button>
        </div>
        <div id="rdMeta" class="mt-1 text-xs text-slate-500"></div>
      </header>
      <div id="rdCoverWrap" class="hidden">
        <img id="rdCover" alt="" class="w-full max-h-[340px] object-cover" />
      </div>
      <div id="rdBody" class="prose prose-slate max-w-none px-5 py-5"></div>
    </article>
  </div>

  <!-- FOOTER -->
  <footer class="bg-black">
    <div class="mx-auto max-w-7xl px-4 py-10 text-white/80 text-center space-y-2">
      <p>© <span id="y"></span> God’s Country March • <a href="index.html#donate" class="underline">Support the March</a></p>
      <p>Questions? <a class="underline" href="mailto:GodsCountryMarch@gmail.com">GodsCountryMarch@gmail.com</a></p>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // ============ EASY-EDIT POSTS ============
    // Put cover images in /blog/ (or change baseCoverPath).
    // Add posts as objects below. Fields:
    //  - title*   (string)
    //  - date*    (YYYY-MM-DD)
    //  - excerpt  (string)
    //  - tags     (array of strings)
    //  - cover    (filename in /blog/), optional
    //  - body*    (HTML string; you can use template literals)
    // * required
    //
    // Deep link: /blog.html#/your-post-slug
    //
    const baseCoverPath = "blog/";

    const POSTS = [
      // Example (remove when ready):
      // {
      //   title: "Welcome to God’s Country March",
      //   date: "2025-09-01",
      //   excerpt: "A quick update on what’s ahead — and how you can jump in.",
      //   tags: ["update","events"],
      //   cover: "welcome.jpg",
      //   body: `
      //     <p>We’re gearing up for a powerful gathering at the Idaho State Capitol. Thank you for your prayers and support!</p>
      //     <ul>
      //       <li>RSVP and bring friends</li>
      //       <li>Volunteer teams forming</li>
      //       <li>Spread the word on social</li>
      //     </ul>
      //   `
      // },
    ];

    // =============== BLOG LOGIC ===============
    const listEl = document.getElementById('list');
    const emptyEl = document.getElementById('empty');
    const searchEl = document.getElementById('search');
    const reader = document.getElementById('reader');
    const rdTitle = document.getElementById('rdTitle');
    const rdMeta = document.getElementById('rdMeta');
    const rdCoverWrap = document.getElementById('rdCoverWrap');
    const rdCover = document.getElementById('rdCover');
    const rdBody = document.getElementById('rdBody');
    const rdClose = document.getElementById('rdClose');
    const sortBtns = document.querySelectorAll('.sort-btn');
    const tagRow = document.getElementById('tagRow');

    let currentSort = 'new';
    let activeTag = '';
    let posts = normalize(POSTS);

    // Build tag filters
    const allTags = [...new Set(posts.flatMap(p => p.tags))].sort();
    if (allTags.length) {
      tagRow.classList.remove('hidden');
      tagRow.innerHTML = `
        <button data-tag="" class="tag-btn rounded-lg px-3 py-1.5 bg-black/60 ring-1 ring-white/10">All</button>
        ${allTags.map(t => `<button data-tag="${t}" class="tag-btn rounded-lg px-3 py-1.5 bg-black/30 ring-1 ring-white/10">${t}</button>`).join('')}
      `;
      tagRow.querySelectorAll('.tag-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          activeTag = btn.dataset.tag;
          tagRow.querySelectorAll('.tag-btn').forEach(b => {
            b.classList.toggle('bg-black/60', b===btn);
            b.classList.toggle('bg-black/30', b!==btn);
          });
          render();
        });
      });
    }

    function normalize(list) {
      return list.map(p => ({
        title: p.title,
        date: p.date,
        excerpt: p.excerpt || "",
        tags: Array.isArray(p.tags) ? p.tags : [],
        cover: p.cover || "",
        body: p.body || "",
        slug: slugify(p.title + " " + p.date)
      }));
    }

    function slugify(s) {
      return (s || "")
       .toLowerCase()
       .replace(/[^a-z0-9]+/g, "-")
       .replace(/(^-|-$)+/g, "");
    }

    function datePretty(d) {
      try {
        const dt = new Date(d + "T00:00:00");
        return dt.toLocaleDateString(undefined, {year:"numeric", month:"short", day:"numeric"});
      } catch { return d; }
    }

    function filtered() {
      let out = posts;
      // search
      const q = (searchEl.value || "").trim().toLowerCase();
      if (q) {
        out = out.filter(p =>
          p.title.toLowerCase().includes(q) ||
          p.excerpt.toLowerCase().includes(q) ||
          p.body.toLowerCase().includes(q) ||
          p.tags.join(" ").toLowerCase().includes(q)
        );
      }
      // tag
      if (activeTag) out = out.filter(p => p.tags.includes(activeTag));
      // sort
      out = [...out].sort((a,b) => currentSort === 'new'
        ? (b.date > a.date ? 1 : -1)
        : (a.date > b.date ? 1 : -1)
      );
      return out;
    }

    function cardHTML(p) {
      const cover = p.cover ? `<img src="${baseCoverPath + p.cover}" alt="" class="h-40 w-full object-cover rounded-t-xl">` : "";
      const tags = p.tags.length ? `
          <div class="mt-2 flex flex-wrap gap-1 text-[11px] text-white/70">
            ${p.tags.map(t => `<span class="rounded bg-white/10 px-2 py-0.5 ring-1 ring-white/15">${t}</span>`).join("")}
          </div>` : "";
      return `
        <article class="card rounded-2xl ring-1 ring-white/10 overflow-hidden shadow hover:shadow-lg hover:-translate-y-0.5 transition">
          ${cover}
          <div class="p-4">
            <h2 class="font-semibold text-lg leading-tight line-clamp-2">${p.title}</h2>
            <div class="mt-1 text-xs text-white/70">${datePretty(p.date)}</div>
            ${tags}
            ${p.excerpt ? `<p class="mt-3 text-sm text-white/85 line-clamp-3">${p.excerpt}</p>` : ""}
            <div class="mt-4">
              <a href="#/${p.slug}" data-slug="${p.slug}"
                 class="read-btn inline-flex items-center rounded-xl bg-white text-slate-900 px-3 py-1.5 text-sm font-semibold shadow hover:shadow-lg">Read</a>
            </div>
          </div>
        </article>
      `;
    }

    function render() {
      const rows = filtered();
      listEl.innerHTML = rows.map(cardHTML).join("");
      emptyEl.classList.toggle('hidden', rows.length > 0);
      // bind read buttons
      listEl.querySelectorAll('.read-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const slug = btn.getAttribute('data-slug');
          openPost(slug);
        });
      });
    }

    function openPost(slug) {
      const p = posts.find(x => x.slug === slug);
      if (!p) return;
      rdTitle.textContent = p.title;
      rdMeta.textContent = `${datePretty(p.date)} ${p.tags.length ? " • " + p.tags.join(", ") : ""}`;
      if (p.cover) {
        rdCover.src = baseCoverPath + p.cover;
        rdCoverWrap.classList.remove('hidden');
      } else {
        rdCoverWrap.classList.add('hidden');
      }
      rdBody.innerHTML = p.body;
      reader.classList.remove('hidden');
      reader.classList.add('flex');
      document.body.style.overflow = 'hidden';
      // set hash
      if (location.hash !== `#/${slug}`) history.replaceState(null, "", `#/${slug}`);
    }

    function closePost() {
      reader.classList.add('hidden');
      reader.classList.remove('flex');
      document.body.style.overflow = '';
      if (location.hash.startsWith("#/")) history.replaceState(null, "", "#");
    }

    // Events
    rdClose.addEventListener('click', closePost);
    reader.addEventListener('click', (e) => { if (e.target === reader) closePost(); });
    window.addEventListener('keydown', (e) => { if (e.key === "Escape" && !reader.classList.contains('hidden')) closePost(); });
    searchEl.addEventListener('input', render);
    sortBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        currentSort = btn.dataset.sort;
        sortBtns.forEach(b => b.classList.toggle('bg-black/60', b===btn));
        sortBtns.forEach(b => b.classList.toggle('bg-black/30', b!==btn));
        render();
      });
    });

    // Initial render
    render();

    // Deep link support
    function checkHash() {
      if (location.hash.startsWith("#/")) {
        const slug = location.hash.slice(2);
        openPost(slug);
      }
    }
    window.addEventListener('hashchange', checkHash);
    checkHash();
  </script>
</body>
</html>
